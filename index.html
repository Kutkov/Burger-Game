<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Signin Template for Bootstrap</title>

    <!-- Bootstrap core CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="css/style.css">
    <script src="js/lib/typed.min.js" type="text/javascript"></script>

    <!-- Custom styles for this template -->
    <style>
    	html,
		body {
		  height: 100%;
		}

		body {
		  background: black url(https://s.cdpn.io/16327/texture_bg.jpg) no-repeat 50% 0px;
		  padding: 50px 0;
		}

		.form-signin {
		  width: 100%;
		  max-width: 330px;
		  padding: 15px;
		  margin: 0 auto;
		  visibility: hidden;
		  opacity: 0.01;
		  transition: 5s;
		}
		
		.window-block{
			position: absolute;
			height:100%;
			width: 100%;
			background: rgba(0,0,0, .4);
			z-index: 99999;
		}

		#myCanvas {
		  height: 260px;
		  width: 100%;
		  /*max-width: 99%;*/
		  min-width: 800px;
		  position: absolute;
		  bottom: 0;
		  left: 0;
		}
		.checkbox{
			margin-top: 20px;
			color: #ccc;
		}
		.title{
			max-width: 600px;
			margin: 50px auto;
			color: #eee;
		}
		.typed-cursor{
			color: #fff;
		}

    </style>

  </head>

  <body class="text-center">

	<!-- <div class="window-block"></div> -->
	<canvas id="myCanvas" height="200" width="800"></canvas>

	<div class="container-element">
		<span id="element"></span>
	</div>

    <form class="form-signin" id="form">
      <img class="mb-4" src="img/burger.png" alt="" width="80" height="72">
      <input type="text" id="inputName" class="form-control" placeholder="Your name">
      <div class="checkbox mb-3">
        <label>
          <input type="checkbox" value="remember-me" id="checkbox"> Соглашение
        </label>
      </div>
      <p class="mt-5 mb-3 text-muted">&copy; 2018</p>
    </form>
    
      <script src="js/registration.js"></script>

	  <script>
	  	form = document.getElementById('form');

	  	form.addEventListener('keydown', function(event) {
		    if(event.keyCode == 13) {
		       event.preventDefault();
		    }
		 });

	  	// typed begin
	  	var typed = new Typed("#element", {
		  strings:  [
		  				"Добро пожаловать к нам на вечеренку. \n Я добавил немного дыма для атмосферы, надеюсь, ты не против. \n Хотя да зачем тебя спрашивать, я не чувствую твою мотивированность. ", "Добро пожаловать к нам на вечеренку. \n Я добавил немного дыма для атмосферы, надеюсь, ты не против. \n Смотрю ты пришел показать свою готовность к системе мотивации, \n уже видишь себя в чекап бургер, ну это вряд-ли сынок ", "Добро пожаловать к нам на вечеренку. \n Я добавил немного дыма для атмосферы, надеюсь, ты не против. \n Смотрю ты пришел показать свою готовность к системе мотивации, \n уже видишь себя в чекап бургер, тебе предстоит показать свой скилл \n у тебя его нет, ты ноль ", "Добро пожаловать к нам на вечеренку. \n Я добавил немного дыма для атмосферы, надеюсь, ты не против. \n Смотрю ты пришел показать свою готовность к системе мотивации, \n уже видишь себя в чекап бургер, тебе предстоит показать свой скилл \n чтобы попасть к нам на обед. Желаю удачи, хотя она тебе не поможет, \n у тебя нет шансов ", "Добро пожаловать к нам на вечеренку. \n Я добавил немного дыма для атмосферы, надеюсь, ты не против. \n Смотрю ты пришел показать свою готовность к системе мотивации, \n уже видишь себя в чекап бургер, тебе предстоит показать свой скилл \n чтобы попасть к нам на обед. Желаю удачи, надеюсь, скоро встретимся \n за одним столом Ketch up Burgers. Для начала тебе стоит указать свое \n имя и меня в завещании ", "Добро пожаловать к нам на вечеренку. \n Я добавил немного дыма для атмосферы, надеюсь, ты не против. \n Смотрю ты пришел показать свою готовность к системе мотивации, \n уже видишь себя в чекап бургер, тебе предстоит показать свой скилл \n чтобы попасть к нам на обед. Желаю удачи, надеюсь, скоро встретимся \n за одним столом Ketch up Burgers. Для начала тебе стоит указать свое \n имя и подтвердить уровень мотивации в соглашении."   
		  			],
		  smartBackspace: true, // Default value
		  typeSpeed: 80,
		  startDelay: 1000,
		  backSpeed: 60,
		  onComplete: (self) => {activeLog();}
		});
	  	// typed end

	  	function activeLog(){
	  		form.style.visibility = 'visible';
	  		form.style.opacity = '1';
	  	};

	  	// smog begin
		canvasWidth = 1600;
		canvasHeight = 200;

		pCount = 0;


		pCollection = new Array();

		var puffs = 1;
		var particlesPerPuff = 2000;
		var img = 'img/smoke2.png';

		var smokeImage = new Image();
		smokeImage.src = img;

		for (var i1 = 0 ; i1 < puffs; i1++)
		{
		  var puffDelay = i1 * 1500; //300 ms between puffs

		  for (var i2 = 0 ; i2 < particlesPerPuff; i2++)
		  {
		    addNewParticle((i2*50) + puffDelay);    
		  }
		}


		draw(new Date().getTime(), 3000)

		
		function addNewParticle(delay)
		{

		  var p = {};
		  p.top = canvasHeight;
		  p.left = randBetween(-200,800);

		  p.start = new Date().getTime() + delay;
		  p.life = 8000;
		  p.speedUp = 30;


		  p.speedRight = randBetween(0,20);

		  p.rot = randBetween(-1,1);
		  p.red = Math.floor(randBetween(0,255));
		  p.blue = Math.floor(randBetween(0,255));
		  p.green = Math.floor(randBetween(0,255));


		  p.startOpacity = .3
		  p.newTop = p.top;
		  p.newLeft = p.left;
		  p.size = 200;
		  p.growth = 10;

		  pCollection[pCount] = p;
		  pCount++;


		}

		function draw(startT, totalT)
		{
		  //Timing
		  var timeDelta = new Date().getTime() - startT;
		  var stillAlive = false;

		  //Grab and clear the canvas
		  var c=document.getElementById("myCanvas");
		  var ctx=c.getContext("2d");
		  ctx.clearRect(0, 0, c.width, c.height);
		  c.width = c.width;

		  //Loop through particles
		  for (var i= 0; i < pCount; i++)
		  {    
		    //Grab the particle
		    var p = pCollection[i];

		    //Timing
		    var td = new Date().getTime() - p.start;
		    var frac = td/p.life

		    if (td > 0)
		    {
		      if (td <= p.life )
		      { stillAlive = true; }

		      //attributes that change over time
		      var newTop = p.top - (p.speedUp * (td/1000));
		      var newLeft = p.left + (p.speedRight * (td/1000));
		      var newOpacity = Math.max(p.startOpacity * (1-frac),0);

		      var newSize = p.size + (p.growth * (td/1000));
		      p.newTop = newTop;
		      p.newLeft = newLeft;

		      //Draw!
		      ctx.fillStyle = 'rgba(150,150,150,' + newOpacity + ')';      
		      ctx.globalAlpha  = newOpacity;
		      ctx.drawImage(smokeImage, newLeft, newTop, newSize, newSize);
		    }
		  }

		  //Repeat if there's still a living particle
		  if (stillAlive)
		  {
		    requestAnimationFrame(function(){draw(startT,totalT);}); 
		  }
		  else
		  {
		    clog(timeDelta + ": stopped");
		  }
		}

		function randBetween(n1,n2)
		{
		  var r = (Math.random() * (n2 - n1)) + n1;
		  return r;
		}

		function randOffset(n, variance)
		{
		  //e.g. variance could be 0.1 to go between 0.9 and 1.1
		  var max = 1 + variance;
		  var min = 1 - variance;
		  var r = Math.random() * (max - min) + min;
		  return n * r;
		}

		function clog(s)
		{  
		  console.log(s);
		}

		// smog end
	  </script>
  </body>
</html>
